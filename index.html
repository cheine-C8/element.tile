<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Periodic Tile Generator - With Isotopes</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --bg-color: #f0f2f5;
            --tile-border: #222;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        /* --- The Tile --- */
        .tile-container {
            width: 260px;
            height: 340px;
            background-color: #ffffff; 
            border: 5px solid var(--tile-border);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            padding: 20px;
            box-shadow: 12px 12px 0px rgba(0,0,0,0.2);
            margin-bottom: 30px;
            transition: background-color 0.4s ease;
            position: relative;
        }

        .atomic-number {
            align-self: flex-start;
            font-size: 2.2rem;
            font-weight: 900;
            color: #333;
            line-height: 1;
        }

        .symbol {
            font-size: 6.5rem;
            font-weight: 900;
            color: #000;
            margin: -5px 0;
            text-shadow: 2px 2px 0px rgba(255,255,255,0.4);
        }

        .element-name {
            font-size: 1.5rem;
            color: #222;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .atomic-mass {
            font-size: 2.2rem;
            font-weight: 900;
            width: 100%;
            text-align: center;
            border-top: 4px solid var(--tile-border);
            padding-top: 5px;
            color: #111;
        }

        .group-label {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: #444;
            font-weight: bold;
            margin-top: 10px;
        }

        /* --- Controls --- */
        .controls-wrapper {
            background: white;
            padding: 25px 35px;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            text-align: center;
            max-width: 400px;
            width: 100%;
        }

        .input-row {
            display: flex;
            gap: 15px;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        label {
            font-size: 0.85rem;
            font-weight: bold;
            color: #555;
            margin-bottom: 5px;
        }

        input, select {
            padding: 10px;
            font-size: 1.1rem;
            border: 2px solid #ddd;
            border-radius: 6px;
            width: 100%;
            box-sizing: border-box;
        }

        input { width: 80px; text-align: center; }
        select { width: 140px; }

        .btn-group {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        button {
            padding: 12px 20px;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.1s, filter 0.2s;
            flex: 1;
        }

        button:active { transform: scale(0.98); }

        .btn-generate { background-color: #333; }
        .btn-generate:hover { background-color: #000; }

        .btn-download { background-color: #28a745; }
        .btn-download:hover { filter: brightness(1.1); }

        .error-msg {
            color: #d9534f;
            margin-top: 15px;
            min-height: 20px;
            font-size: 0.9rem;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="tile-container" id="elementTile">
        <div class="atomic-number" id="disp-number">1</div>
        <div class="symbol" id="disp-symbol">H</div>
        <div class="element-name" id="disp-name">Hydrogen</div>
        
        <div style="width:100%; text-align:center;">
             <div class="atomic-mass" id="disp-mass">1</div>
             <div class="group-label" id="disp-group">Nonmetal</div>
        </div>
    </div>

    <div class="controls-wrapper">
        <div class="input-row">
            <div class="input-group">
                <label for="numInput">Atomic #</label>
                <input type="number" id="numInput" min="1" max="118" value="1">
            </div>
            
            <div class="input-group">
                <label for="isotopeSelect">Isotope</label>
                <select id="isotopeSelect" onchange="updateTileMass()">
                    <option value="standard">Standard</option>
                </select>
            </div>
        </div>
        
        <div class="btn-group">
            <button class="btn-generate" onclick="findElement()">Find Element</button>
            <button class="btn-download" onclick="downloadTile()">Download PNG</button>
        </div>
        <div class="error-msg" id="errorMsg"></div>
    </div>

    <script>
        // 1. Element Data with "iso" (Isotopes) array for key elements
        const periodicTable = [
            {n:1, s:"H", name:"Hydrogen", m:1.008, iso:[1, 2, 3]}, 
            {n:2, s:"He", name:"Helium", m:4.0026, iso:[3, 4]},
            {n:3, s:"Li", name:"Lithium", m:6.94, iso:[6, 7]}, 
            {n:4, s:"Be", name:"Beryllium", m:9.0122, iso:[7, 9, 10]},
            {n:5, s:"B", name:"Boron", m:10.81, iso:[10, 11]}, 
            {n:6, s:"C", name:"Carbon", m:12.011, iso:[12, 13, 14]},
            {n:7, s:"N", name:"Nitrogen", m:14.007, iso:[14, 15]}, 
            {n:8, s:"O", name:"Oxygen", m:15.999, iso:[16, 17, 18]},
            {n:9, s:"F", name:"Fluorine", m:18.998, iso:[19]}, 
            {n:10, s:"Ne", name:"Neon", m:20.180, iso:[20, 21, 22]},
            {n:11, s:"Na", name:"Sodium", m:22.990, iso:[23]}, 
            {n:12, s:"Mg", name:"Magnesium", m:24.305, iso:[24, 25, 26]},
            {n:13, s:"Al", name:"Aluminium", m:26.982, iso:[27]}, 
            {n:14, s:"Si", name:"Silicon", m:28.085, iso:[28, 29, 30]},
            {n:15, s:"P", name:"Phosphorus", m:30.974, iso:[31]}, 
            {n:16, s:"S", name:"Sulfur", m:32.06, iso:[32, 33, 34, 36]},
            {n:17, s:"Cl", name:"Chlorine", m:35.45, iso:[35, 37]}, 
            {n:18, s:"Ar", name:"Argon", m:39.948, iso:[36, 38, 40]},
            {n:19, s:"K", name:"Potassium", m:39.098, iso:[39, 40, 41]}, 
            {n:20, s:"Ca", name:"Calcium", m:40.078, iso:[40, 42, 43, 44, 46, 48]},
            // Placeholder for 21-25 (auto-handled)
            {n:21, s:"Sc", name:"Scandium", m:44.956}, {n:22, s:"Ti", name:"Titanium", m:47.867},
            {n:23, s:"V", name:"Vanadium", m:50.942}, {n:24, s:"Cr", name:"Chromium", m:51.996},
            {n:25, s:"Mn", name:"Manganese", m:54.938}, 
            // Iron
            {n:26, s:"Fe", name:"Iron", m:55.845, iso:[54, 56, 57, 58]},
            {n:27, s:"Co", name:"Cobalt", m:58.933}, {n:28, s:"Ni", name:"Nickel", m:58.693},
            // Copper
            {n:29, s:"Cu", name:"Copper", m:63.546, iso:[63, 65]}, 
            {n:30, s:"Zn", name:"Zinc", m:65.38},
            // ... Filling rest with placeholders for brevity ...
            {n:31, s:"Ga", name:"Gallium", m:69.723}, {n:32, s:"Ge", name:"Germanium", m:72.630},
            {n:33, s:"As", name:"Arsenic", m:74.922}, {n:34, s:"Se", name:"Selenium", m:78.971},
            {n:35, s:"Br", name:"Bromine", m:79.904}, {n:36, s:"Kr", name:"Krypton", m:83.798},
            {n:37, s:"Rb", name:"Rubidium", m:85.468}, {n:38, s:"Sr", name:"Strontium", m:87.62},
            {n:39, s:"Y", name:"Yttrium", m:88.906}, {n:40, s:"Zr", name:"Zirconium", m:91.224},
            {n:41, s:"Nb", name:"Niobium", m:92.906}, {n:42, s:"Mo", name:"Molybdenum", m:95.95},
            {n:43, s:"Tc", name:"Technetium", m:98}, {n:44, s:"Ru", name:"Ruthenium", m:101.07},
            {n:45, s:"Rh", name:"Rhodium", m:102.91}, {n:46, s:"Pd", name:"Palladium", m:106.42},
            // Silver
            {n:47, s:"Ag", name:"Silver", m:107.87, iso:[107, 109]}, 
            {n:48, s:"Cd", name:"Cadmium", m:112.41},
            {n:49, s:"In", name:"Indium", m:114.82}, {n:50, s:"Sn", name:"Tin", m:118.71},
            {n:51, s:"Sb", name:"Antimony", m:121.76}, {n:52, s:"Te", name:"Tellurium", m:127.60},
            {n:53, s:"I", name:"Iodine", m:126.90, iso:[127, 129, 131]}, 
            {n:54, s:"Xe", name:"Xenon", m:131.29},
            {n:55, s:"Cs", name:"Cesium", m:132.91}, {n:56, s:"Ba", name:"Barium", m:137.33},
            {n:57, s:"La", name:"Lanthanum", m:138.91}, {n:58, s:"Ce", name:"Cerium", m:140.12},
            {n:59, s:"Pr", name:"Praseodymium", m:140.91}, {n:60, s:"Nd", name:"Neodymium", m:144.24},
            {n:61, s:"Pm", name:"Promethium", m:145}, {n:62, s:"Sm", name:"Samarium", m:150.36},
            {n:63, s:"Eu", name:"Europium", m:151.96}, {n:64, s:"Gd", name:"Gadolinium", m:157.25},
            {n:65, s:"Tb", name:"Terbium", m:158.93}, {n:66, s:"Dy", name:"Dysprosium", m:162.50},
            {n:67, s:"Ho", name:"Holmium", m:164.93}, {n:68, s:"Er", name:"Erbium", m:167.26},
            {n:69, s:"Tm", name:"Thulium", m:168.93}, {n:70, s:"Yb", name:"Ytterbium", m:173.05},
            {n:71, s:"Lu", name:"Lutetium", m:174.97}, {n:72, s:"Hf", name:"Hafnium", m:178.49},
            {n:73, s:"Ta", name:"Tantalum", m:180.95}, {n:74, s:"W", name:"Tungsten", m:183.84},
            {n:75, s:"Re", name:"Rhenium", m:186.21}, {n:76, s:"Os", name:"Osmium", m:190.23},
            {n:77, s:"Ir", name:"Iridium", m:192.22}, {n:78, s:"Pt", name:"Platinum", m:195.08},
            // Gold
            {n:79, s:"Au", name:"Gold", m:196.97, iso:[197]}, 
            {n:80, s:"Hg", name:"Mercury", m:200.59},
            {n:81, s:"Tl", name:"Thallium", m:204.38}, {n:82, s:"Pb", name:"Lead", m:207.2},
            {n:83, s:"Bi", name:"Bismuth", m:208.98}, {n:84, s:"Po", name:"Polonium", m:209},
            {n:85, s:"At", name:"Astatine", m:210}, {n:86, s:"Rn", name:"Radon", m:222},
            {n:87, s:"Fr", name:"Francium", m:223}, {n:88, s:"Ra", name:"Radium", m:226},
            {n:89, s:"Ac", name:"Actinium", m:227}, {n:90, s:"Th", name:"Thorium", m:232.04},
            {n:91, s:"Pa", name:"Protactinium", m:231.04}, 
            // Uranium
            {n:92, s:"U", name:"Uranium", m:238.03, iso:[233, 235, 238]},
            {n:93, s:"Np", name:"Neptunium", m:237}, 
            // Plutonium
            {n:94, s:"Pu", name:"Plutonium", m:244, iso:[238, 239, 240, 241]},
            {n:95, s:"Am", name:"Americium", m:243}, {n:96, s:"Cm", name:"Curium", m:247},
            {n:97, s:"Bk", name:"Berkelium", m:247}, {n:98, s:"Cf", name:"Californium", m:251},
            {n:99, s:"Es", name:"Einsteinium", m:252}, {n:100, s:"Fm", name:"Fermium", m:257},
            {n:101, s:"Md", name:"Mendelevium", m:258}, {n:102, s:"No", name:"Nobelium", m:259},
            {n:103, s:"Lr", name:"Lawrencium", m:262}, {n:104, s:"Rf", name:"Rutherfordium", m:267},
            {n:105, s:"Db", name:"Dubnium", m:268}, {n:106, s:"Sg", name:"Seaborgium", m:269},
            {n:107, s:"Bh", name:"Bohrium", m:270}, {n:108, s:"Hs", name:"Hassium", m:269},
            {n:109, s:"Mt", name:"Meitnerium", m:278}, {n:110, s:"Ds", name:"Darmstadtium", m:281},
            {n:111, s:"Rg", name:"Roentgenium", m:281}, {n:112, s:"Cn", name:"Copernicium", m:285},
            {n:113, s:"Nh", name:"Nihonium", m:286}, {n:114, s:"Fl", name:"Flerovium", m:289},
            {n:115, s:"Mc", name:"Moscovium", m:288}, {n:116, s:"Lv", name:"Livermorium", m:293},
            {n:117, s:"Ts", name:"Tennessine", m:294}, {n:118, s:"Og", name:"Oganesson", m:294}
        ];

        let currentElement = null;

        function getElementGroup(n) {
             if (n === 1) return { c: "#ffcdd2", g: "Nonmetal" };
             if ([2, 10, 18, 36, 54, 86, 118].includes(n)) return { c: "#e1bee7", g: "Noble Gas" }; 
             if ([3, 11, 19, 37, 55, 87].includes(n)) return { c: "#ffcc80", g: "Alkali Metal" };
             if ([4, 12, 20, 38, 56, 88].includes(n)) return { c: "#fff59d", g: "Alkaline Earth" };
             if (n >= 57 && n <= 71) return { c: "#f48fb1", g: "Lanthanide" };
             if (n >= 89 && n <= 103) return { c: "#ce93d8", g: "Actinide" };
             if ([9, 17, 35, 53, 85, 117].includes(n)) return { c: "#b2dfdb", g: "Halogen" };
             if ((n >= 21 && n <= 30) || (n >= 39 && n <= 48) || (n >= 72 && n <= 80) || (n >= 104 && n <= 112)) 
                 return { c: "#90caf9", g: "Transition Metal" };
             if ([5, 14, 32, 33, 51, 52].includes(n)) return { c: "#a5d6a7", g: "Metalloid" };
             if ([6, 7, 8, 15, 16, 34].includes(n)) return { c: "#ffcdd2", g: "Nonmetal" };
             return { c: "#e0e0e0", g: "Metal" };
        }

        function findElement() {
            const inputVal = parseInt(document.getElementById('numInput').value);
            const errorDiv = document.getElementById('errorMsg');
            const tile = document.getElementById('elementTile');
            const isoSelect = document.getElementById('isotopeSelect');
            
            if (isNaN(inputVal) || inputVal < 1 || inputVal > 118) {
                errorDiv.innerText = "Please enter a valid number between 1 and 118.";
                return;
            }
            errorDiv.innerText = "";

            currentElement = periodicTable[inputVal - 1];

            if (currentElement) {
                const groupInfo = getElementGroup(currentElement.n);
                
                // Update Basic Info
                document.getElementById('disp-number').innerText = currentElement.n;
                document.getElementById('disp-symbol').innerText = currentElement.s;
                document.getElementById('disp-name').innerText = currentElement.name;
                document.getElementById('disp-group').innerText = groupInfo.g;
                tile.style.backgroundColor = groupInfo.c;

                // Reset Isotope Dropdown
                isoSelect.innerHTML = ""; // Clear options
                
                // 1. Add Standard Option
                const stdOption = document.createElement("option");
                stdOption.value = "standard";
                stdOption.text = "Standard (Rounded)";
                isoSelect.add(stdOption);

                // 2. Add Isotopes if they exist in data
                if (currentElement.iso && currentElement.iso.length > 0) {
                    currentElement.iso.forEach(massNum => {
                        const opt = document.createElement("option");
                        opt.value = massNum;
                        opt.text = `${currentElement.s}-${massNum}`;
                        isoSelect.add(opt);
                    });
                }

                // Default Update
                updateTileMass();
            }
        }

        function updateTileMass() {
            const isoSelect = document.getElementById('isotopeSelect');
            const selectedValue = isoSelect.value;
            const massDisplay = document.getElementById('disp-mass');

            if (selectedValue === "standard") {
                // Round the standard atomic mass
                massDisplay.innerText = Math.round(currentElement.m);
            } else {
                // Use the specific isotope mass number selected
                massDisplay.innerText = selectedValue;
            }
        }

        function downloadTile() {
            const tileElement = document.getElementById('elementTile');
            const elementName = document.getElementById('disp-name').innerText;
            const isoSelect = document.getElementById('isotopeSelect');
            const isoText = isoSelect.options[isoSelect.selectedIndex].text;
            
            // Generate filename based on selection (e.g. "Carbon-14-Tile.png" or "Carbon-Standard-Tile.png")
            let filename = `${elementName}-Tile.png`;
            if (isoSelect.value !== "standard") {
                filename = `${elementName}-${isoSelect.value}-Tile.png`;
            }

            html2canvas(tileElement, {
                scale: 3, 
                useCORS: true, 
                backgroundColor: null 
            }).then(canvas => {
                const imageURL = canvas.toDataURL("image/png");
                const downloadLink = document.createElement('a');
                downloadLink.href = imageURL;
                downloadLink.download = filename;
                document.body.appendChild(downloadLink);
                downloadLink.click();
                document.body.removeChild(downloadLink);
            }).catch(err => {
                 console.error("Image download failed:", err);
                 alert("Error generating image.");
            });
        }

        // Initialize with Hydrogen
        findElement();

        document.getElementById("numInput").addEventListener("keypress", function(event) {
            if (event.key === "Enter") findElement();
        });
    </script>
</body>
</html>
